{
  "filename": "definition.md",
  "__html": "<!--\n Copyright (c) 2019, Xiaomi, Inc.  All rights reserved.\n This source code is licensed under the Apache License Version 2.0, which\n can be found in the LICENSE file in the root directory of this source tree.\n-->\n<h1>组件定义</h1>\n<p>组件通过 json 进行的定义。</p>\n<h2>目的</h2>\n<ol>\n<li>前端可拖动组件的生成</li>\n<li>后端创建 flow 的时候，对 job 输入的内容进行校验</li>\n</ol>\n<h2>组件定义 json 的格式</h2>\n<p>一个满足标准的 json，需要满足如下 typescript 定义。</p>\n<p>可以用<a href=\"https://app.quicktype.io/\">这个网站</a>生成 json 定义</p>\n<pre><code class=\"language-ts\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">interface</span> ComponentDefine {\n  group: <span class=\"hljs-built_in\">string</span>;\n  name: <span class=\"hljs-built_in\">string</span>;\n  hidden: <span class=\"hljs-built_in\">boolean</span>;\n  items: ComponentDefineItem[];\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">interface</span> ComponentDefineItem {\n  <span class=\"hljs-comment\">/**\n   * 传到后端的key\n   */</span>\n  property: <span class=\"hljs-built_in\">string</span>;\n  <span class=\"hljs-comment\">/**\n   * 是否必填，false 或不写 则为不是必填\n   */</span>\n  required?: <span class=\"hljs-built_in\">boolean</span>;\n  <span class=\"hljs-comment\">/**\n   * 输入框前面的标识，不写默认用property\n   */</span>\n  label?: <span class=\"hljs-built_in\">string</span>;\n  input:\n    | {\n        id: <span class=\"hljs-string\">\"line\"</span> | <span class=\"hljs-string\">\"textarea\"</span> | <span class=\"hljs-string\">\"sql\"</span> | <span class=\"hljs-string\">\"shell\"</span> | <span class=\"hljs-string\">\"richText\"</span> | <span class=\"hljs-string\">\"uploadBase64\"</span>;\n      }\n    | {\n        id: <span class=\"hljs-string\">\"select\"</span>;\n        options: <span class=\"hljs-built_in\">Array</span>&lt;{\n          <span class=\"hljs-comment\">/**\n           * 属性的值\n           */</span>\n          id: <span class=\"hljs-built_in\">string</span>;\n          <span class=\"hljs-comment\">/**\n           * 下拉框中的候选项，不写用id代替\n           */</span>\n          name?: <span class=\"hljs-built_in\">string</span>;\n        }&gt;;\n      };\n}\n</code></pre>\n<h2>举个例子</h2>\n<p>参考 std::mail 组件的 json 定义。</p>\n<pre><code class=\"language-json\">{\n  <span class=\"hljs-attr\">\"group\"</span>: <span class=\"hljs-string\">\"std\"</span>,\n  <span class=\"hljs-attr\">\"name\"</span>: <span class=\"hljs-string\">\"mail\"</span>,\n  <span class=\"hljs-attr\">\"hidden\"</span>: <span class=\"hljs-literal\">false</span>,\n  <span class=\"hljs-attr\">\"items\"</span>: [\n    {\n      <span class=\"hljs-attr\">\"property\"</span>: <span class=\"hljs-string\">\"title\"</span>,\n      <span class=\"hljs-attr\">\"label\"</span>: <span class=\"hljs-string\">\"邮件标题\"</span>,\n      <span class=\"hljs-attr\">\"required\"</span>: <span class=\"hljs-literal\">true</span>,\n      <span class=\"hljs-attr\">\"input\"</span>: {\n        <span class=\"hljs-attr\">\"id\"</span>: <span class=\"hljs-string\">\"textarea\"</span>\n      }\n    },\n    {\n      <span class=\"hljs-attr\">\"property\"</span>: <span class=\"hljs-string\">\"contentHtml\"</span>,\n      <span class=\"hljs-attr\">\"label\"</span>: <span class=\"hljs-string\">\"邮件内容\"</span>,\n      <span class=\"hljs-attr\">\"required\"</span>: <span class=\"hljs-literal\">true</span>,\n      <span class=\"hljs-attr\">\"input\"</span>: {\n        <span class=\"hljs-attr\">\"id\"</span>: <span class=\"hljs-string\">\"richText\"</span>\n      }\n    },\n    {\n      <span class=\"hljs-attr\">\"property\"</span>: <span class=\"hljs-string\">\"recipient\"</span>,\n      <span class=\"hljs-attr\">\"label\"</span>: <span class=\"hljs-string\">\"收件人（多个用逗号隔开）\"</span>,\n      <span class=\"hljs-attr\">\"required\"</span>: <span class=\"hljs-literal\">true</span>,\n      <span class=\"hljs-attr\">\"input\"</span>: {\n        <span class=\"hljs-attr\">\"id\"</span>: <span class=\"hljs-string\">\"textarea\"</span>\n      }\n    }\n  ]\n}\n</code></pre>\n<p>group: 组件分类</p>\n<p>name: 组件名称</p>\n<p>hidden: 组件在前端是否影藏</p>\n<p>item: 每一个 property 都是用户可以在页面输入的项</p>\n<h2>页面支持的 input 类型</h2>\n<ol>\n<li>line\n<ul>\n<li>单行文本框</li>\n</ul>\n</li>\n<li>textarea\n<ul>\n<li>多行文本框</li>\n</ul>\n</li>\n<li>sql\n<ul>\n<li>sql 输入框</li>\n</ul>\n</li>\n<li>shell\n<ul>\n<li>shell 输入框</li>\n</ul>\n</li>\n<li>richText\n<ul>\n<li>富文本编辑器</li>\n</ul>\n</li>\n<li>uploadBase64\n<ul>\n<li>文件上传</li>\n</ul>\n</li>\n<li>select\n<ul>\n<li>下拉单选框</li>\n</ul>\n</li>\n</ol>\n<p>如果还有你需要的，可以提 issus。</p>\n",
  "link": "/zh-cn/docs/component/customize/definition.html",
  "meta": {}
}